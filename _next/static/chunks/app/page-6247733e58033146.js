(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3815:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>z});var s=i(5155),n=i(7558),o=i(4932),l=i(2115);let r=["U2","D2","L2","R2","F2","B2"],a={U2:"U",D2:"D",L2:"L",R2:"R",F2:"F",B2:"B"},d={white:"#FFFFFF",yellow:"#FFD700",red:"#FF0000",orange:"#FFA500",blue:"#0000FF",green:"#00FF00",hidden:"#1a1a1a"},c={pieces:[{position:[0,1,0],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.hidden,L:d.hidden,R:d.hidden}},{position:[0,-1,0],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.hidden,L:d.hidden,R:d.hidden}},{position:[-1,0,0],colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.hidden,L:d.red,R:d.hidden}},{position:[1,0,0],colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.hidden,L:d.hidden,R:d.orange}},{position:[0,0,1],colors:{U:d.hidden,D:d.hidden,F:d.green,B:d.hidden,L:d.hidden,R:d.hidden}},{position:[0,0,-1],colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.blue,L:d.hidden,R:d.hidden}},{position:[0,1,1],colors:{U:d.yellow,D:d.hidden,F:d.green,B:d.hidden,L:d.hidden,R:d.hidden}},{position:[1,1,0],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.hidden,L:d.hidden,R:d.orange}},{position:[0,1,-1],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.blue,L:d.hidden,R:d.hidden}},{position:[-1,1,0],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.hidden,L:d.red,R:d.hidden}},{position:[-1,0,1],colors:{U:d.hidden,D:d.hidden,F:d.green,B:d.hidden,L:d.red,R:d.hidden}},{position:[1,0,1],colors:{U:d.hidden,D:d.hidden,F:d.green,B:d.hidden,L:d.hidden,R:d.orange}},{position:[1,0,-1],colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.blue,L:d.hidden,R:d.orange}},{position:[-1,0,-1],colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.blue,L:d.red,R:d.hidden}},{position:[0,-1,1],colors:{U:d.hidden,D:d.white,F:d.green,B:d.hidden,L:d.hidden,R:d.hidden}},{position:[1,-1,0],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.hidden,L:d.hidden,R:d.orange}},{position:[0,-1,-1],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.blue,L:d.hidden,R:d.hidden}},{position:[-1,-1,0],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.hidden,L:d.red,R:d.hidden}},{position:[-1,1,1],colors:{U:d.yellow,D:d.hidden,F:d.green,B:d.hidden,L:d.red,R:d.hidden}},{position:[1,1,1],colors:{U:d.yellow,D:d.hidden,F:d.green,B:d.hidden,L:d.hidden,R:d.orange}},{position:[1,1,-1],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.blue,L:d.hidden,R:d.orange}},{position:[-1,1,-1],colors:{U:d.yellow,D:d.hidden,F:d.hidden,B:d.blue,L:d.red,R:d.hidden}},{position:[-1,-1,1],colors:{U:d.hidden,D:d.white,F:d.green,B:d.hidden,L:d.red,R:d.hidden}},{position:[1,-1,1],colors:{U:d.hidden,D:d.white,F:d.green,B:d.hidden,L:d.hidden,R:d.orange}},{position:[1,-1,-1],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.blue,L:d.hidden,R:d.orange}},{position:[-1,-1,-1],colors:{U:d.hidden,D:d.white,F:d.hidden,B:d.blue,L:d.red,R:d.hidden}}]};var h=i(3264);let u=(e,t)=>{let i=t[0],s=e.pieces;switch(i){case"U":return s.filter(e=>1===e.position[1]&&(0===e.position[0]||0===e.position[2])&&(0!==e.position[0]||0!==e.position[2]));case"D":return s.filter(e=>-1===e.position[1]&&(0===e.position[0]||0===e.position[2])&&(0!==e.position[0]||0!==e.position[2]));case"L":return s.filter(e=>-1===e.position[0]&&(0===e.position[1]||0===e.position[2])&&(0!==e.position[1]||0!==e.position[2]));case"R":return s.filter(e=>1===e.position[0]&&(0===e.position[1]||0===e.position[2])&&(0!==e.position[1]||0!==e.position[2]));case"F":return s.filter(e=>1===e.position[2]&&(0===e.position[0]||0===e.position[1])&&(0!==e.position[0]||0!==e.position[1]));case"B":return s.filter(e=>-1===e.position[2]&&(0===e.position[0]||0===e.position[1])&&(0!==e.position[0]||0!==e.position[1]));default:return[]}},p=(e,t)=>{let[i,s,n]=e,o=1===t.length;switch(t[0]){case"U":return o?[-n,s,i]:[n,s,-i];case"D":return o?[n,s,-i]:[-n,s,i];case"L":return o?[i,-n,s]:[i,n,-s];case"R":return o?[i,n,-s]:[i,-n,s];case"F":return o?[s,-i,n]:[-s,i,n];case"B":return o?[-s,i,n]:[s,-i,n];default:return[i,s,n]}},g=(e,t)=>{let i=1===t.length;switch(t[0]){case"U":return i?{...e,F:e.R,R:e.B,B:e.L,L:e.F}:{...e,F:e.L,L:e.B,B:e.R,R:e.F};case"D":return i?{...e,F:e.L,L:e.B,B:e.R,R:e.F}:{...e,F:e.R,R:e.B,B:e.L,L:e.F};case"L":return i?{...e,U:e.B,B:e.D,D:e.F,F:e.U}:{...e,U:e.F,F:e.D,D:e.B,B:e.U};case"R":return i?{...e,U:e.F,F:e.D,D:e.B,B:e.U}:{...e,U:e.B,B:e.D,D:e.F,F:e.U};case"F":return i?{...e,U:e.L,L:e.D,D:e.R,R:e.U}:{...e,U:e.R,R:e.D,D:e.L,L:e.U};case"B":return i?{...e,U:e.R,R:e.D,D:e.L,L:e.U}:{...e,U:e.L,L:e.D,D:e.R,R:e.U};default:return e}},m=e=>({pieces:e.pieces.map(e=>({position:[...e.position],colors:{...e.colors}}))}),x={copy:0,getAffectedBlocks:0,findBlocks:0,calcPosition:0,calcColors:0},b=(e,t)=>{if(r.includes(t)){let i=a[t];return b(b(e,i),i)}let i=new Date().getTime(),s=m(e),n=new Date().getTime(),o=u(e,t),l=new Date().getTime();return x.copy+=n-i,x.getAffectedBlocks+=l-n,o.forEach(i=>{let n=new Date().getTime(),o=e.pieces.find(e=>e.position[0]===i.position[0]&&e.position[1]===i.position[1]&&e.position[2]===i.position[2]),l=new Date().getTime();if(o){let e=p(o.position,t),i=new Date().getTime(),r=g(o.colors,t),a=new Date().getTime(),d=s.pieces.find(t=>t.position[0]===e[0]&&t.position[1]===e[1]&&t.position[2]===e[2]),c=new Date().getTime();d&&(d.colors=r),x.calcPosition+=i-l,x.calcColors+=a-i,x.findBlocks+=c-a+l-n}}),s},F=(e,t)=>"L"===e&&"R"===t||"R"===e&&"L"===t||"U"===e&&"D"===t||"D"===e&&"U"===t||"F"===e&&"B"===t||"B"===e&&"F"===t,R=e=>{let t={[d.white]:"D",[d.yellow]:"U",[d.red]:"L",[d.orange]:"R",[d.blue]:"B",[d.green]:"F",[d.hidden]:" "},i=new Map;for(let t of e.pieces){let{colors:e,position:s}=t,n=s.join("_");i.set(n,e)}return{U:[t[i.get("0_1_-1").U],t[i.get("1_1_0").U],t[i.get("0_1_1").U],t[i.get("-1_1_0").U]],D:[t[i.get("0_-1_1").D],t[i.get("1_-1_0").D],t[i.get("0_-1_-1").D],t[i.get("-1_-1_0").D]],R:[t[i.get("1_1_0").R],t[i.get("1_0_-1").R],t[i.get("1_-1_0").R],t[i.get("1_0_1").R]],L:[t[i.get("-1_1_0").L],t[i.get("-1_0_1").L],t[i.get("-1_-1_0").L],t[i.get("-1_0_-1").L]],F:[t[i.get("0_1_1").F],t[i.get("1_0_1").F],t[i.get("0_-1_1").F],t[i.get("-1_0_1").F]],B:[t[i.get("0_1_-1").B],t[i.get("-1_0_-1").B],t[i.get("0_-1_-1").B],t[i.get("1_0_-1").B]]}},D=e=>({D:[...e.D],U:[...e.U],R:[...e.R],L:[...e.L],F:[...e.F],B:[...e.B]}),B=e=>e.D.every(e=>"D"===e)&&("F"===e.F[2]&&"L"===e.L[2]&&"B"===e.B[2]&&"R"===e.R[2]||"L"===e.F[2]&&"B"===e.L[2]&&"R"===e.B[2]&&"F"===e.R[2]||"B"===e.F[2]&&"R"===e.L[2]&&"F"===e.B[2]&&"L"===e.R[2]||"R"===e.F[2]&&"F"===e.L[2]&&"L"===e.B[2]&&"B"===e.R[2]),L=(e,t)=>{let i=e.map(e=>{let[t,i]=e;return t[i]});for(let s=0;s<e.length;s++){let[n,o]=e[s];n[o]=i[(s+t+e.length)%e.length]}},f=(e,t)=>{let i=D(e);switch(t){case"U":L([[i.U,0],[i.U,1],[i.U,2],[i.U,3]],-1),L([[i.F,0],[i.L,0],[i.B,0],[i.R,0]],-1);break;case"D":L([[i.D,0],[i.D,1],[i.D,2],[i.D,3]],-1),L([[i.F,2],[i.R,2],[i.B,2],[i.L,2]],-1);break;case"L":L([[i.L,0],[i.L,1],[i.L,2],[i.L,3]],-1),L([[i.U,3],[i.F,3],[i.D,3],[i.B,1]],-1);break;case"R":L([[i.R,0],[i.R,1],[i.R,2],[i.R,3]],-1),L([[i.U,1],[i.B,3],[i.D,1],[i.F,1]],-1);break;case"F":L([[i.F,0],[i.F,1],[i.F,2],[i.F,3]],-1),L([[i.U,2],[i.R,3],[i.D,0],[i.L,1]],-1);break;case"B":L([[i.B,0],[i.B,1],[i.B,2],[i.B,3]],-1),L([[i.U,0],[i.L,3],[i.D,2],[i.R,1]],-1);break;case"U2":L([[i.U,0],[i.U,1],[i.U,2],[i.U,3]],-2),L([[i.F,0],[i.L,0],[i.B,0],[i.R,0]],-2);break;case"D2":L([[i.D,0],[i.D,1],[i.D,2],[i.D,3]],-2),L([[i.F,2],[i.R,2],[i.B,2],[i.L,2]],-2);break;case"L2":L([[i.L,0],[i.L,1],[i.L,2],[i.L,3]],-2),L([[i.U,3],[i.F,3],[i.D,3],[i.B,1]],-2);break;case"R2":L([[i.R,0],[i.R,1],[i.R,2],[i.R,3]],-2),L([[i.U,1],[i.B,3],[i.D,1],[i.F,1]],-2);break;case"F2":L([[i.F,0],[i.F,1],[i.F,2],[i.F,3]],-2),L([[i.U,2],[i.R,3],[i.D,0],[i.L,1]],-2);break;case"B2":L([[i.B,0],[i.B,1],[i.B,2],[i.B,3]],-2),L([[i.U,0],[i.L,3],[i.D,2],[i.R,1]],-2);break;case"U'":L([[i.U,0],[i.U,1],[i.U,2],[i.U,3]],1),L([[i.F,0],[i.L,0],[i.B,0],[i.R,0]],1);break;case"D'":L([[i.D,0],[i.D,1],[i.D,2],[i.D,3]],1),L([[i.F,2],[i.R,2],[i.B,2],[i.L,2]],1);break;case"L'":L([[i.L,0],[i.L,1],[i.L,2],[i.L,3]],1),L([[i.U,3],[i.F,3],[i.D,3],[i.B,1]],1);break;case"R'":L([[i.R,0],[i.R,1],[i.R,2],[i.R,3]],1),L([[i.U,1],[i.B,3],[i.D,1],[i.F,1]],1);break;case"F'":L([[i.F,0],[i.F,1],[i.F,2],[i.F,3]],1),L([[i.U,2],[i.R,3],[i.D,0],[i.L,1]],1);break;case"B'":L([[i.B,0],[i.B,1],[i.B,2],[i.B,3]],1),L([[i.U,0],[i.L,3],[i.D,2],[i.R,1]],1)}return i},U=e=>{let t=R(e);if(B(t))return"";let i=["U","D","L","R","F","B","U'","D'","L'","R'","F'","B'","U2","D2","L2","R2","F2","B2"],s=new Map;s.set([],t);let n={applyMove:0,skip:0,isSolved:0};for(let e=0;e<8;e++){let e=new Map;for(let t of s.keys())for(let o of i){let i=s.get(t);if(i[o[0]].every(e=>" "===e))continue;let l=new Date().getTime(),r=f(i,o),a=new Date().getTime();if(t.length>=1&&t[t.length-1][0]===o[0]||t.length>=2&&t[t.length-2][0]===o[0]&&F(t[t.length-1][0],o[0]))continue;let d=new Date().getTime(),c=t.concat([o]);if(B(r))return c.join(" ");e.set(c,r);let h=new Date().getTime();n.applyMove+=a-l,n.skip+=d-a,n.isSolved+=h-d}s=e}return console.log(n),""},v=e=>{let t=e===d.hidden;return new h._4j({color:e,roughness:t?.9:.2,metalness:.1*!t,emissive:t?0:e,emissiveIntensity:.1*!t,transparent:t,opacity:t?.15:1,side:h.$EB})},j=(e,t)=>{let i=JSON.parse(JSON.stringify(e));return"cross"===t&&(i.pieces=i.pieces.map(e=>{let[t,i,s]=e.position;return(-1!==i||0!==t||0!==s)&&(-1!==i||(0!==t||1!==s&&-1!==s)&&(0!==s||1!==t&&-1!==t))?{...e,colors:{U:d.hidden,D:d.hidden,F:d.hidden,B:d.hidden,L:d.hidden,R:d.hidden}}:e})),i},w=(0,l.forwardRef)((e,t)=>{let{mode:i="normal"}=e,[n,o]=(0,l.useState)(()=>j(c,i));(0,l.useEffect)(()=>{o(e=>j(e,i))},[i]);let r=(0,l.useRef)(null),a=(0,l.useRef)({isAnimating:!1,move:null,progress:0}),h=e=>{a.current.isAnimating||o(t=>b(t,e))},u=()=>{console.log("开始打乱魔方");let e=["U","D","L","R","F","B","U'","D'","L'","R'","F'","B'","U2","D2","L2","R2","F2","B2"],t=".",s=".",n=[];for(let i=0;i<20;i++){let i=e.filter(e=>e[0]!==t[0]&&e[0]!==s[0]),o=i[Math.floor(Math.random()*i.length)];n.push(o),s=t,t=o}return o(()=>{console.log("生成新的魔方状态");let e=j(c,i);for(let t of n)e=b(e,t);return console.log("应用的移动序列:",n.join(" ")),e}),n.join(" ")},p=()=>U(m()),g=()=>{o(()=>j(c,i))},m=()=>n;(0,l.useImperativeHandle)(t,()=>({rotatePieces:h,scrambleCube:u,resetCube:g,getState:m,getShortestPath:p}));let x=(0,l.useMemo)(()=>n.pieces.map(e=>[v(e.colors.R||d.hidden),v(e.colors.L||d.hidden),v(e.colors.U||d.hidden),v(e.colors.D||d.hidden),v(e.colors.F||d.hidden),v(e.colors.B||d.hidden)]),[n]);return(0,s.jsx)("group",{ref:r,children:n.pieces.map((e,t)=>(0,s.jsxs)("mesh",{position:e.position,children:[(0,s.jsx)("boxGeometry",{args:[.95,.95,.95]}),x[t].map((e,t)=>(0,s.jsx)("primitive",{object:e,attach:"material-".concat(t)},t))]},t))})});w.displayName="RubiksCube";let N=e=>{let{}=e;return(0,s.jsx)("div",{className:"bg-white/10 p-4 rounded-lg backdrop-blur-sm w-100",children:(0,s.jsxs)("div",{className:"text-white text-sm",children:[(0,s.jsx)("h3",{className:"font-bold mb-1",children:"提示："}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("div",{children:"1. 连续两次旋转同一面，记为1步，如R2为1步"})})]})})},y=(0,i(5521).v)(e=>({cubeRef:null,setCubeRef:t=>e({cubeRef:t})})),_=e=>{let{showControls:t=!0,showCube:i=!0,isMain:r=!1}=e,a=(0,l.useRef)(null),{cubeRef:d,setCubeRef:c}=y();(0,l.useLayoutEffect)(()=>{r&&c(a)},[r,c]);let h=e=>{var t;let i=r?a:d;null==i||null===(t=i.current)||void 0===t||t.rotatePieces(e)};return(0,s.jsxs)("div",{className:"relative w-full h-full",children:[t&&(0,s.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,s.jsx)(N,{onMove:h,onScramble:()=>{var e;let t=r?a:d;null==t||null===(e=t.current)||void 0===e||e.scrambleCube()},onReset:()=>{var e;let t=r?a:d;null==t||null===(e=t.current)||void 0===e||e.resetCube()},onSolve:()=>{var e;let t=r?a:d,i=null==t?void 0:null===(e=t.current)||void 0===e?void 0:e.getShortestPath();i&&i.split(" ").forEach(e=>{h(e)})}})}),i&&(0,s.jsxs)(n.Hl,{camera:{position:[5,5,5],fov:45,up:[0,1,0]},className:"absolute inset-0",children:[(0,s.jsx)("ambientLight",{intensity:.7}),(0,s.jsx)("pointLight",{position:[10,10,10],intensity:.5}),(0,s.jsx)("pointLight",{position:[-10,-10,-10],intensity:.5}),(0,s.jsx)(w,{ref:a,mode:"cross"}),(0,s.jsx)(o.N,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/6,maxPolarAngle:5*Math.PI/6,target:[0,0,0],makeDefault:!0})]})]})},k="cube-trainer-statistics",C=()=>{let e=localStorage.getItem(k);return e?JSON.parse(e):{attempts:[],last12Rate:0,last12AvgTime:0}},S=e=>{localStorage.setItem(k,JSON.stringify(e))},T=(e,t)=>{let i=[...e].slice(-t);return 0===i.length?0:i.filter(e=>e.isCorrect).length/i.length*100},A=(e,t)=>{let i=[...e].slice(-t);return 0===i.length?0:i.reduce((e,t)=>e+t.timeSpent,0)/i.length},M=(e,t)=>{let i=[],s=Math.min(t,e.length);for(let t=0;t<s;t++){let s=e.slice(0,t+1).slice(-12);i.push({successRate:T(s,s.length),avgTime:A(s,s.length)})}return i},P=e=>{let{attempts:t}=e;return{attempts:t,last12Rate:T(t,12),last12AvgTime:A(t,12)}};var E=i(2502),I=i(4065);E.t1.register(E.PP,E.kc,E.FN,E.No,E.hE,E.m_,E.s$);let O={responsive:!0,maintainAspectRatio:!1,scales:{y:{min:0,max:100,position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{callback:function(e){return"".concat(e,"%")},color:"rgba(255, 255, 255, 0.5)"}},y1:{min:0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:function(e){return"".concat((e/1e3).toFixed(1),"s")},color:"rgba(255, 255, 255, 0.5)"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.5)",maxRotation:0,callback:function(e,t){return"#".concat(t+1)}}}},plugins:{legend:{position:"top",labels:{color:"rgba(255, 255, 255, 0.7)"}},tooltip:{callbacks:{title:function(e){return"第 ".concat(Number(e[0].label.replace("#",""))," 次")}}}}},J=e=>{let{attempt:t,onClose:i}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg max-w-2xl w-full mx-4",children:[(0,s.jsxs)("h3",{className:"text-xl text-white mb-4",children:["第 ",t.id," 次答题详情"]}),(0,s.jsxs)("div",{className:"space-y-2 text-gray-300",children:[(0,s.jsxs)("p",{children:["用时：",(t.timeSpent/1e3).toFixed(1)," 秒"]}),(0,s.jsxs)("p",{children:["答案：",t.userGuess," 步（",t.isCorrect?"正确":"错误","）"]}),(0,s.jsxs)("p",{children:["实际步数：",t.actualLength," 步"]}),(0,s.jsxs)("p",{className:"font-mono",children:["打乱公式：",t.scrambleFormula]}),(0,s.jsxs)("p",{className:"font-mono",children:["复原公式：",t.solutionFormula]})]}),(0,s.jsx)("button",{onClick:i,className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"关闭"})]})})},G=e=>{let{statistics:t}=e,[i,n]=(0,l.useState)(null),o=(0,l.useMemo)(()=>M(t.attempts,t.attempts.length),[t.attempts]),r={labels:o.map((e,t)=>"#".concat(t+1)),datasets:[{label:"最近12次正确率",data:o.map(e=>e.successRate),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.3,yAxisID:"y"},{label:"最近12次平均耗时",data:o.map(e=>e.avgTime),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)",tension:.3,yAxisID:"y1"}]};return(0,s.jsxs)("div",{className:"w-[400px] bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-xl text-white mb-4",children:"统计信息"}),(0,s.jsx)("div",{className:"h-[200px] mb-6",children:(0,s.jsx)(I.N1,{options:O,data:r})}),(0,s.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:t.attempts.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded cursor-pointer hover:bg-gray-600 transition-colors duration-200",onClick:()=>n(e),children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-gray-300",children:["#",e.id]}),(0,s.jsxs)("span",{className:"ml-2 text-gray-400",children:[(e.timeSpent/1e3).toFixed(1),"s"]})]}),(0,s.jsx)("span",{className:"".concat(e.isCorrect?"text-green-500":"text-red-500"," font-bold"),children:e.isCorrect?"✓":"✗"})]},e.id))}),i&&(0,s.jsx)(J,{attempt:i,onClose:()=>n(null)})]})};function z(){let{cubeRef:e}=y(),[t,i]=(0,l.useState)(""),[n,o]=(0,l.useState)(""),[r,a]=(0,l.useState)(!1),[d,c]=(0,l.useState)(null),[h,u]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),[m,x]=(0,l.useState)({attempts:[],last12Rate:0,last12AvgTime:0}),[b,F]=(0,l.useState)(0),[R,D]=(0,l.useState)(0);(0,l.useEffect)(()=>{x(C())},[]),(0,l.useEffect)(()=>{let e=null;return b>0&&!r&&(e=setInterval(()=>{D(Date.now())},100)),()=>{e&&clearInterval(e)}},[b,r]);let B=()=>{var t;i((null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.scrambleCube())||""),o(""),a(!1),c(null),u(null),F(Date.now()),D(Date.now())},L=async i=>{let s=Date.now(),n=s-b;c(i),a(!0),g(!0),setTimeout(()=>{var l;let r=(null==e?void 0:null===(l=e.current)||void 0===l?void 0:l.getShortestPath())||"",a=r.split(" ").filter(Boolean).length;o(r),u(a);let d={id:m.attempts.length+1,timestamp:s,timeSpent:n,isCorrect:i===a,userGuess:i,actualLength:a,scrambleFormula:t,solutionFormula:r},c=P({attempts:[...m.attempts,d],last12Rate:0,last12AvgTime:0});x(c),S(c),g(!1)},0)};return(0,s.jsxs)("div",{className:"w-full h-screen bg-gray-900 flex",children:[(0,s.jsx)("div",{className:"absolute bottom-4 left-4 w-[300px]",children:(0,s.jsx)("div",{className:"bg-white/10 p-4 rounded-lg backdrop-blur-sm w-100",children:(0,s.jsxs)("div",{className:"text-white text-sm",children:[(0,s.jsx)("h3",{className:"font-bold mb-1",children:"提示："}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("div",{children:"连续两次旋转同一面，记为1步，如R2为1步"})})]})})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,s.jsx)("span",{className:"text-white text-2xl font-bold mb-1",children:"十字练习"}),(0,s.jsx)("div",{className:"w-[61.8vh] h-[61.8vh]",children:(0,s.jsx)(_,{showControls:!1,showCube:!0,isMain:!0})}),t&&!r&&(0,s.jsxs)("div",{className:"mt-4 text-center",children:[(0,s.jsxs)("p",{className:"text-2xl text-blue-500 mb-4",children:[((R-b)/1e3).toFixed(1),"s"]}),(0,s.jsx)("p",{className:"text-gray-500 mb-2",children:"请选择最短路径的步数："}),(0,s.jsx)("div",{className:"flex gap-2",children:[0,1,2,3,4,5,6,7,8].map(e=>(0,s.jsx)("button",{onClick:()=>L(e),className:"bg-blue-500 text-white w-10 h-10 rounded hover:bg-blue-600",children:e},e))})]}),r&&(0,s.jsx)("div",{className:"mt-4 text-center flex flex-col",children:p?(0,s.jsx)("p",{className:"text-xl text-blue-500",children:"结果校验中..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-xl ".concat(d===h?"text-green-500":"text-red-500"),children:d===h?"答对了！":"答错了！"}),(0,s.jsxs)("p",{className:"text-gray-500 mt-2 self-start",children:["打乱公式：",(0,s.jsx)("span",{className:"text-green-500 font-mono",children:t})]}),(0,s.jsxs)("p",{className:"text-gray-500 mt-2 self-start",children:["最短路径：",(0,s.jsx)("span",{className:"text-green-500 font-mono",children:n}),(0,s.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",h," 步)"]})]}),(0,s.jsx)("button",{onClick:B,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4",children:"下一题"})]})}),!t&&(0,s.jsx)("button",{onClick:B,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4",children:"开始练习"})]}),(0,s.jsx)("div",{className:"absolute top-4 right-4",children:(0,s.jsx)(G,{statistics:m})})]})}},7800:(e,t,i)=>{Promise.resolve().then(i.bind(i,3815))}},e=>{var t=t=>e(e.s=t);e.O(0,[367,831,647,413,419,441,684,358],()=>t(7800)),_N_E=e.O()}]);